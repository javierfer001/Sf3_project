{# Checks for popular products if any are set, show otherwise show nothing #}
{%if productPopular is defined and productPopular|length != 0 %}  
    <aside class="sidebar shop-sidebar">
        <div class="sidebar-widget">
            <h3 class="sidebar-title br-bottom">{{'popproduct'|trans}}</h3>
            <div class="clearfix">
                <ul class="sidebar-posts">
                    {% for p in productPopular %}
                        <li class="sidebar-post mb10">
                            <a title="{{ app.request.locale=='es' ? (p.nameEs) : (p.name) }}" href="{{ path('product_name_show',{'id':p.id,'name':(app.request.locale=='es' ? (p.nameEs|truncate(30))|url_encode|replace(stringlist) : (p.name|truncate(30))|url_encode|replace(stringlist))}) }}">
                                <div class="image-post">
                                    <img  style=" height: 80%;" src="{{asset('producto/'~p.imagenesShowName('file_1'))}}" alt="{{p.imagenesShowNameEdit('file_1').getAlt()|default('Image J&J RATTAN')}}">
                                </div>
                                <div class="info-post">
                                    <h5>{{ app.request.locale=='es' ? (p.nameEs|truncate(15, true)) : (p.name|truncate(15, true)) }}
                                        </a></h5>
                                    <span>{{ p.showSubCategory(app.request.locale)|truncate(15) }}</span>
                                </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </aside>
{% endif %}